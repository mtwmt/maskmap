function _defineProperties(n,l){for(var t=0;t<l.length;t++){var e=l[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function _createClass(n,l,t){return l&&_defineProperties(n.prototype,l),t&&_defineProperties(n,t),n}function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(n,l,t){n.exports=t("zUnb")},zUnb:function(n,l,t){"use strict";t.r(l);var e,a,o=t("8Y7J"),i=function n(){_classCallCheck(this,n)},u=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"getOpen",value:function(n){this.isOpen=n}}]),n}(),s=t("pMnS"),r=t("s7LF"),c=t("SVse"),p=t("fNgX"),h=t("Nv++"),b=t("cUpR"),m=t("itXk"),g=t("lJxs"),d=t("wHSu"),_=function(){function n(l,t){_classCallCheck(this,n),this.appService=l,this.appStoreService=t,this.doOpen=new o.m,this.faSearch=d.a,this.assetsUrl="assets",this.mask=""}return _createClass(n,[{key:"ngOnInit",value:function(){var n=this;Object(m.a)(this.appService.fetchTaiwanCity(),this.appService.fetchPharmacy()).pipe(Object(g.a)((function(n){return[n[0],n[1]]}))).subscribe((function(l){n.getTaiwanCity=l[0],n.onCityChange("\u53f0\u5317\u5e02")})),this.appStoreService.getCalMask$.subscribe((function(l){n.childTotal=l.childTotal,n.adultTotal=l.adultTotal}))}},{key:"onCityChange",value:function(n){this.appStoreService.setArea(n),this.city=n,this.appStoreService.setPharmacyList(this.city)}},{key:"onAreaChange",value:function(n){this.area="\u5168\u5340"===n?"":n,this.appStoreService.setPharmacyList(this.city,this.area)}},{key:"onMask",value:function(n){this.mask=n,this.appStoreService.setMask(n)}},{key:"onSwitch",value:function(){this.isOpen=!this.isOpen,this.doOpen.emit(this.isOpen)}}]),n}(),f=t("vkgz"),k=t("IheW"),v=t("2Vo4"),C=t("XNiG"),y=((a=function(){function n(){_classCallCheck(this,n),this.getCity$=new v.a(this.getCity),this.getArea$=new v.a(this.getArea),this.getPharmacy$=new C.a,this.getCurInfo$=new C.a,this.getCalMask$=new C.a}return _createClass(n,[{key:"setCity",value:function(n){this.getCity=n,this.getCity$.next(this.getCity)}},{key:"setArea",value:function(n){this.getArea=this.getCity.filter((function(l){return l.Name===n})),this.getArea$.next(this.getArea[0].Districts)}},{key:"setPharmacy",value:function(n){this.getAllPharmacy=n}},{key:"setPharmacyList",value:function(n,l){var t=this.getAllPharmacy.filter((function(t){return t.properties.address.match("\u81fa")&&(t.properties.address=t.properties.address.replace("\u81fa","\u53f0")),l||(l=""),t.properties.address.match(n+l)}));this.getPharmacy=t,this.getPharmacy$.next(t),this.setCalMask(t)}},{key:"setPharmacyInfo",value:function(n,l){var t=Object.assign({},l,{coordinates:n.coordinates});this.getCurInfo$.next(t)}},{key:"setMask",value:function(n){var l;l=this.getPharmacy.filter("child"===n?function(n){return n.properties.mask_child>0}:"adult"===n?function(n){return n.properties.mask_adult>0}:function(n){return n.properties.mask_child>0||n.properties.mask_adult>0}),this.getPharmacy$.next(l)}},{key:"setCalMask",value:function(n){var l=0,t=0;n.map((function(n){l+=n.properties.mask_child,t+=n.properties.mask_adult})),this.getCalMask$.next({childTotal:l,adultTotal:t})}}]),n}()).ngInjectableDef=o.Mb({factory:function(){return new a},token:a,providedIn:"root"}),a),P=((e=function(){function n(l,t){_classCallCheck(this,n),this.httpClient=l,this.appStoreService=t,this.assetsUrl="assets",this.url="https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json"}return _createClass(n,[{key:"fetchTaiwanCity",value:function(n){var l=this;return this.httpClient.get("".concat(this.assetsUrl,"/counties.json")).pipe(Object(g.a)((function(n){return n.sort((function(n,l){return n.Sort-l.Sort})),n.map((function(n){n.Districts.sort((function(n,l){return n.Sort-l.Sort}))})),n})),Object(f.a)((function(n){l.appStoreService.setCity(n)})))}},{key:"fetchPharmacy",value:function(n){var l=this;return this.httpClient.get(this.url).pipe(Object(g.a)((function(n){return n.features.map((function(n){n.geometry.coordinates=n.geometry.coordinates.reverse(),n.properties.phone=n.properties.phone.replace(/\s*/g,"")})),n.features.filter((function(n){return n.properties.mask_adult>0||n.properties.mask_child>0}))})),Object(f.a)((function(n){l.appStoreService.setPharmacy(n)})))}},{key:"fetchlocal",value:function(){return this.httpClient.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat([24.953750499999998,121.34356229999999].join(","),".json?routing=true&access_token=pk.eyJ1IjoibXR3bXQiLCJhIjoiY2s2bnczbXh4MHNtYTN1cnVoa2FycjEzayJ9.r5GL2Ms2aZ6vjaJhzpSCOg"))}}]),n}()).ngInjectableDef=o.Mb({factory:function(){return new e(o.Nb(k.c),o.Nb(y))},token:e,providedIn:"root"}),e),O=o.nb({encapsulation:0,styles:[['@charset "UTF-8";.search[_ngcontent-%COMP%]{position:relative}.search__icon[_ngcontent-%COMP%]{display:none;position:absolute;left:100%;bottom:0;padding:.5rem;background:#e0e0e0;border-radius:.25rem;cursor:pointer}@media (max-width:800px){.search__icon[_ngcontent-%COMP%]{display:block}}.search__flex[_ngcontent-%COMP%]{display:-webkit-box;display:flex;justify-content:space-around}.search__header[_ngcontent-%COMP%]{height:10.25rem;background:#e0e0e0;padding:1.25rem}.search__header[_ngcontent-%COMP%]   .search__flex[_ngcontent-%COMP%]{padding-top:1rem}.search__body[_ngcontent-%COMP%]{height:calc(100% - 230px);padding:1.25rem}.search__body-title[_ngcontent-%COMP%]{padding-left:1.25rem;color:#4f4f4f;font-weight:700;font-size:2.25rem;line-height:3.375rem}.search__body-area[_ngcontent-%COMP%], .search__body-city[_ngcontent-%COMP%]{position:relative;margin-top:1.25rem}.search__body-area[_ngcontent-%COMP%]:before, .search__body-city[_ngcontent-%COMP%]:before{position:absolute;top:-.5rem;left:1.25rem;padding:0 .5rem;font-size:.75rem;background:#fff}.search__body-area[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .search__body-city[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 1.25rem;width:100%;height:3.125rem;font-size:1rem;font-family:"Hiragino Sans CNS","\u5fae\u8edf\u6b63\u9ed1\u9ad4",Arial;border-radius:3.125rem;border:.125rem solid #4f4f4f}.search__body-city[_ngcontent-%COMP%]:before{content:"\u7e23\u5e02"}.search__body-area[_ngcontent-%COMP%]:before{content:"\u9109\u93ae\u5e02\u5340\u5225"}.search__info[_ngcontent-%COMP%]{text-align:center;line-height:2.25rem;font-size:.75rem;font-weight:700;color:#4f4f4f}.search__info[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{display:inline-block;height:2.5rem}.search__info[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{vertical-align:middle}.search__info[_ngcontent-%COMP%]   .num[_ngcontent-%COMP%]{margin:0 .125rem;font-size:1.5rem;color:#f2994a}.search__mask[_ngcontent-%COMP%]{margin-top:2.375rem}.search__mask[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem}.search__mask-adult[_ngcontent-%COMP%], .search__mask-both[_ngcontent-%COMP%], .search__mask-child[_ngcontent-%COMP%]{cursor:pointer;position:relative;width:5rem;height:5rem;margin-top:1.5rem;box-shadow:0 5px 10px rgba(0,0,0,.25);border-radius:1.25rem}.search__mask-adult[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .search__mask-both[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .search__mask-child[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0;margin:auto}.search__mask-adult.isAct[_ngcontent-%COMP%], .search__mask-both.isAct[_ngcontent-%COMP%], .search__mask-child.isAct[_ngcontent-%COMP%]{box-shadow:0 .3125rem .625rem #f2c94c}.search__mask-total[_ngcontent-%COMP%]{margin-top:2rem;font-size:.875rem;line-height:1.5}.search__mask-total[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#f2994a;line-height:2}.search__mask-total[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5;color:#000;font-weight:400}']],data:{}});function M(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,3,"option",[],null,[[null,"valueChange"]],(function(n,l,t){var e=!0;return"valueChange"===l&&(e=!1!==(n.context.$implicit.Name=t)&&e),e}),null,null)),o.ob(1,147456,null,0,r.b,[o.k,o.B,[8,null]],{value:[0,"value"]},null),o.ob(2,147456,null,0,r.e,[o.k,o.B,[8,null]],{value:[0,"value"]},null),(n()(),o.Gb(3,null,["",""]))],(function(n,l){n(l,1,0,l.context.$implicit.Name),n(l,2,0,l.context.$implicit.Name)}),(function(n,l){n(l,3,0,l.context.$implicit.Name)}))}function x(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,3,"option",[],null,[[null,"valueChange"]],(function(n,l,t){var e=!0;return"valueChange"===l&&(e=!1!==(n.context.$implicit.Name=t)&&e),e}),null,null)),o.ob(1,147456,null,0,r.b,[o.k,o.B,[8,null]],{value:[0,"value"]},null),o.ob(2,147456,null,0,r.e,[o.k,o.B,[8,null]],{value:[0,"value"]},null),(n()(),o.Gb(3,null,["",""]))],(function(n,l){n(l,1,0,l.context.$implicit.Name),n(l,2,0,l.context.$implicit.Name)}),(function(n,l){n(l,3,0,l.context.$implicit.Name)}))}function z(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,33,"div",[["class","search"]],null,null,null,null,null)),o.Eb(512,null,c.q,c.r,[o.q,o.r,o.k,o.B]),o.ob(2,278528,null,0,c.i,[c.q],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o.Db(3,{active:0}),(n()(),o.pb(4,0,null,null,2,"div",[["class","search__icon"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.onSwitch()&&e),e}),null,null)),(n()(),o.pb(5,0,null,null,1,"fa-icon",[["class","ng-fa-icon"]],[[1,"title",0],[8,"innerHTML",1]],null,null,p.d,p.c)),o.ob(6,573440,null,0,h.c,[b.b,h.a,h.d,[2,h.i]],{icon:[0,"icon"]},null),(n()(),o.pb(7,0,null,null,26,"div",[["class","search__header"]],null,null,null,null,null)),(n()(),o.pb(8,0,null,null,1,"figure",[],null,null,null,null,null)),(n()(),o.pb(9,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),o.pb(10,0,null,null,23,"div",[["class","search__flex"]],null,null,null,null,null)),(n()(),o.pb(11,0,null,null,6,"div",[["class","search__info"]],null,null,null,null,null)),(n()(),o.pb(12,0,null,null,1,"figure",[],null,null,null,null,null)),(n()(),o.pb(13,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),o.pb(14,0,null,null,3,"p",[],null,null,null,null,null)),(n()(),o.pb(15,0,null,null,1,"span",[["class","num"]],null,null,null,null,null)),(n()(),o.Gb(-1,null,["7"])),(n()(),o.Gb(-1,null,["\u5929\u4e00\u6b21"])),(n()(),o.pb(18,0,null,null,7,"div",[["class","search__info"]],null,null,null,null,null)),(n()(),o.pb(19,0,null,null,1,"figure",[],null,null,null,null,null)),(n()(),o.pb(20,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),o.pb(21,0,null,null,4,"p",[],null,null,null,null,null)),(n()(),o.Gb(-1,null,["\u9650\u8cfc"])),(n()(),o.pb(23,0,null,null,1,"span",[["class","num"]],null,null,null,null,null)),(n()(),o.Gb(-1,null,["2"])),(n()(),o.Gb(-1,null,["\u7247"])),(n()(),o.pb(26,0,null,null,7,"div",[["class","search__info"]],null,null,null,null,null)),(n()(),o.pb(27,0,null,null,1,"figure",[],null,null,null,null,null)),(n()(),o.pb(28,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),o.pb(29,0,null,null,4,"p",[],null,null,null,null,null)),(n()(),o.Gb(-1,null,["\u4ee3\u8cfc"])),(n()(),o.pb(31,0,null,null,1,"span",[["class","num"]],null,null,null,null,null)),(n()(),o.Gb(-1,null,["1"])),(n()(),o.Gb(-1,null,["\u5361"])),(n()(),o.pb(34,0,null,null,44,"div",[["class","search__body"]],null,null,null,null,null)),(n()(),o.pb(35,0,null,null,1,"div",[["class","search__body-title"]],null,null,null,null,null)),(n()(),o.Gb(-1,null,["\u641c\u5c0b"])),(n()(),o.pb(37,0,null,null,4,"div",[["class","search__body-city"]],null,null,null,null,null)),(n()(),o.pb(38,0,null,null,3,"select",[["id","city"],["name",""]],null,[[null,"change"]],(function(n,l,t){var e=!0;return"change"===l&&(e=!1!==n.component.onCityChange(t.target.value)&&e),e}),null,null)),(n()(),o.eb(16777216,null,null,2,null,M)),o.ob(40,278528,null,0,c.j,[o.M,o.J,o.q],{ngForOf:[0,"ngForOf"]},null),o.Cb(131072,c.b,[o.h]),(n()(),o.pb(42,0,null,null,8,"div",[["class","search__body-area"]],null,null,null,null,null)),(n()(),o.pb(43,0,null,null,7,"select",[["id","zone"],["name",""]],null,[[null,"change"]],(function(n,l,t){var e=!0;return"change"===l&&(e=!1!==n.component.onAreaChange(t.target.value)&&e),e}),null,null)),(n()(),o.pb(44,0,null,null,3,"option",[],null,null,null,null,null)),o.ob(45,147456,null,0,r.b,[o.k,o.B,[8,null]],null,null),o.ob(46,147456,null,0,r.e,[o.k,o.B,[8,null]],null,null),(n()(),o.Gb(-1,null,["\u5168\u5340"])),(n()(),o.eb(16777216,null,null,2,null,x)),o.ob(49,278528,null,0,c.j,[o.M,o.J,o.q],{ngForOf:[0,"ngForOf"]},null),o.Cb(131072,c.b,[o.h]),(n()(),o.pb(51,0,null,null,27,"div",[["class","search__mask"]],null,null,null,null,null)),(n()(),o.pb(52,0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),o.Gb(-1,null,["\u53e3\u7f69\u985e\u578b"])),(n()(),o.pb(54,0,null,null,15,"div",[["class","search__flex"]],null,null,null,null,null)),(n()(),o.pb(55,0,null,null,4,"div",[["class","search__mask-child isAct"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.onMask("child")&&e),e}),null,null)),o.Eb(512,null,c.q,c.r,[o.q,o.r,o.k,o.B]),o.ob(57,278528,null,0,c.i,[c.q],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o.Db(58,{isAct:0}),(n()(),o.pb(59,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),o.pb(60,0,null,null,4,"div",[["class","search__mask-adult"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.onMask("adult")&&e),e}),null,null)),o.Eb(512,null,c.q,c.r,[o.q,o.r,o.k,o.B]),o.ob(62,278528,null,0,c.i,[c.q],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o.Db(63,{isAct:0}),(n()(),o.pb(64,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),o.pb(65,0,null,null,4,"div",[["class","search__mask-both"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.onMask("both")&&e),e}),null,null)),o.Eb(512,null,c.q,c.r,[o.q,o.r,o.k,o.B]),o.ob(67,278528,null,0,c.i,[c.q],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o.Db(68,{isAct:0}),(n()(),o.pb(69,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),o.pb(70,0,null,null,8,"div",[["class","search__mask-total"]],null,null,null,null,null)),(n()(),o.pb(71,0,null,null,3,"h4",[],null,null,null,null,null)),(n()(),o.Gb(72,null,["",""," "])),(n()(),o.pb(73,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o.Gb(74,null,["\u53e3\u7f69\u7e3d\u91cf\uff1a",""])),(n()(),o.pb(75,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o.Gb(76,null,["\u5c0f\u5b69\u53e3\u7f69\uff1a",""])),(n()(),o.pb(77,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o.Gb(78,null,["\u6210\u4eba\u53e3\u7f69\uff1a",""]))],(function(n,l){var t=l.component,e=n(l,3,0,t.isOpen);n(l,2,0,"search",e),n(l,6,0,t.faSearch),n(l,40,0,o.Hb(l,40,0,o.Bb(l,41).transform(t.appStoreService.getCity$))),n(l,49,0,o.Hb(l,49,0,o.Bb(l,50).transform(t.appStoreService.getArea$)));var a=n(l,58,0,"child"===t.mask);n(l,57,0,"search__mask-child isAct",a);var i=n(l,63,0,"adult"===t.mask);n(l,62,0,"search__mask-adult",i);var u=n(l,68,0,""===t.mask);n(l,67,0,"search__mask-both",u)}),(function(n,l){var t=l.component;n(l,5,0,o.Bb(l,6).title,o.Bb(l,6).renderedIconHTML),n(l,9,0,o.tb(1,"",t.assetsUrl,"/nhi.svg")),n(l,13,0,o.tb(1,"",t.assetsUrl,"/calendar.svg")),n(l,20,0,o.tb(1,"",t.assetsUrl,"/mask.svg")),n(l,28,0,o.tb(1,"",t.assetsUrl,"/card.svg")),n(l,59,0,o.tb(1,"",t.assetsUrl,"/child.svg")),n(l,64,0,o.tb(1,"",t.assetsUrl,"/adult.svg")),n(l,69,0,o.tb(1,"",t.assetsUrl,"/both.svg")),n(l,72,0,t.city,t.area),n(l,74,0,t.childTotal+t.adultTotal),n(l,76,0,t.childTotal),n(l,78,0,t.adultTotal)}))}var w=function(){function n(l,t){_classCallCheck(this,n),this.appService=l,this.appStoreService=t,this.assetsUrl="assets"}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"setInfo",value:function(n,l){this.appStoreService.setPharmacyInfo(n,l)}}]),n}(),S=o.nb({encapsulation:0,styles:[['.pharmacy__wrap[_ngcontent-%COMP%]:after{content:"";display:block;clear:both}[_nghost-%COMP%]{position:absolute;left:0;bottom:0;z-index:9999;width:100%;height:10.625rem}.pharmacy[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;overflow-y:hidden;overflow-x:scroll}.pharmacy__wrap[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:21.875rem;height:8.125rem;margin:.625rem;padding:1rem .625rem;box-shadow:0 5px 10px #f2f2f2;border-radius:.625rem;background:#fff;cursor:pointer}.pharmacy__title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;line-height:1.6875rem}.pharmacy__addr[_ngcontent-%COMP%], .pharmacy__phone[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5;color:#828282}.pharmacy__adult[_ngcontent-%COMP%], .pharmacy__child[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#828282}.pharmacy__adult[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .pharmacy__child[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2.5rem}.pharmacy__adult[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .pharmacy__child[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.pharmacy__block-left[_ngcontent-%COMP%]{float:left;width:50%}.pharmacy__block-right[_ngcontent-%COMP%]{float:right;width:50%;display:-webkit-box;display:flex;justify-content:space-around}']],data:{}});function j(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,16,"div",[["class","pharmacy__wrap"]],[[4,"left","rem"]],[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.setInfo(n.context.$implicit.geometry,n.context.$implicit.properties)&&e),e}),null,null)),(n()(),o.pb(1,0,null,null,1,"div",[["class","pharmacy__title"]],null,null,null,null,null)),(n()(),o.Gb(2,null,["",""])),(n()(),o.pb(3,0,null,null,4,"div",[["class","pharmacy__block-left"]],null,null,null,null,null)),(n()(),o.pb(4,0,null,null,1,"div",[["class","pharmacy__addr"]],null,null,null,null,null)),(n()(),o.Gb(5,null,["",""])),(n()(),o.pb(6,0,null,null,1,"div",[["class","pharmacy__phone"]],null,null,null,null,null)),(n()(),o.Gb(7,null,["",""])),(n()(),o.pb(8,0,null,null,8,"div",[["class","pharmacy__block-right"]],null,null,null,null,null)),(n()(),o.pb(9,0,null,null,3,"div",[["class","pharmacy__child"]],null,null,null,null,null)),(n()(),o.pb(10,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),o.pb(11,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o.Gb(12,null,["",""])),(n()(),o.pb(13,0,null,null,3,"div",[["class","pharmacy__adult"]],null,null,null,null,null)),(n()(),o.pb(14,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),o.pb(15,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o.Gb(16,null,["",""]))],null,(function(n,l){var t=l.component;n(l,0,0,23.125*l.context.index),n(l,2,0,l.context.$implicit.properties.name),n(l,5,0,l.context.$implicit.properties.address),n(l,7,0,l.context.$implicit.properties.phone),n(l,10,0,o.tb(1,"",t.assetsUrl,"/child.svg")),n(l,12,0,l.context.$implicit.properties.mask_child),n(l,14,0,o.tb(1,"",t.assetsUrl,"/adult.svg")),n(l,16,0,l.context.$implicit.properties.mask_adult)}))}function I(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,3,"div",[["class","pharmacy"]],null,null,null,null,null)),(n()(),o.eb(16777216,null,null,2,null,j)),o.ob(2,278528,null,0,c.j,[o.M,o.J,o.q],{ngForOf:[0,"ngForOf"]},null),o.Cb(131072,c.b,[o.h])],(function(n,l){var t=l.component;n(l,2,0,o.Hb(l,2,0,o.Bb(l,3).transform(t.appStoreService.getPharmacy$)))}),null)}var $=t("4R65");t("JXP8");var T=function(){function n(l,t){var e=this;_classCallCheck(this,n),this.appService=l,this.appStoreService=t,this.assetsUrl="assets",this.location=[25.0032999,121.5540404],this.location$=new v.a(this.location),this.getPosition(),this.appStoreService.getPharmacy$.pipe(Object(g.a)((function(n){if(n)return n.reduce((function(n,l){return n.push(Object.assign({},l.properties,{coordinates:l.geometry.coordinates})),n}),[])}))).subscribe((function(n){e.renderMap(n,n[0].coordinates)})),this.icons={red:this.customIcon("red"),orange:this.customIcon("orange"),yellow:this.customIcon("yellow"),green:this.customIcon("green"),blue:this.customIcon("blue"),violet:this.customIcon("violet"),gold:this.customIcon("gold"),grey:this.customIcon("grey")}}return _createClass(n,[{key:"ngOnInit",value:function(){var n=this;this.map=$.map("map",{center:[25.0032999,121.5540404],zoom:13,zoomControl:!1,layers:[$.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'&copy; \u53e3\u7f69\u5730\u5716 by <a href="https://mtwmt.github.io/" target="_blank">Mandy</a>',maxZoom:20,id:"mapbox/streets-v11",accessToken:"pk.eyJ1IjoibXR3bXQiLCJhIjoiY2s2Z2lvN2p5MmE2MjNsbjNsc2tvM2I5ciJ9.6WxKL8KMqhcRpsHrNNtvfQ"})]}),this.appStoreService.getCurInfo$.subscribe((function(l){n.onPharmacy(l)})),Object(m.a)(this.appService.fetchTaiwanCity(),this.location$).pipe(Object(g.a)((function(n){return[n[0],{latitude:n[1][0],longitude:n[1][1]}]}))).subscribe((function(n){}))}},{key:"ngOnDestroy",value:function(){this.location$.unsubscribe()}},{key:"renderMap",value:function(n,l){var t=this;this.group=(new $.MarkerClusterGroup).addTo(this.map),n.map((function(n,l){t.addMarker(n)})),this.map.addLayer(this.group),$.marker(this.location,{icon:this.icons.gold}).addTo(this.map)}},{key:"onPharmacy",value:function(n){this.map.setView(n.coordinates,16).closePopup(),this.prevPoint&&this.map.removeLayer(this.prevPoint),this.prevPoint=$.marker(n.coordinates,{icon:this.icons.red}).addTo(this.map).bindPopup(this.customPopup(n)).openPopup()}},{key:"addMarker",value:function(n){var l=$.marker(n.coordinates,{icon:this.icons.grey}).bindPopup(this.customPopup(n));this.group.addLayer(l)}},{key:"customPopup",value:function(n){return'\n      <div class="customPopup">\n        <div class="customPopup__title">'.concat(n.name,'</div>\n        <div class="customPopup__block-left">\n          <div class="customPopup__addr">').concat(n.address,'</div>\n          <div class="customPopup__note">').concat(n.note,'</div>\n          <div class="customPopup__phone">').concat(n.phone,'</div>\n          <div class="customPopup__updated">\u66f4\u65b0\u6642\u9593\uff1a<br/>').concat(n.updated,'</div>\n        </div>\n        <div class="customPopup__block-right">\n          <div class="customPopup__block-flex">\n            <div class="customPopup__child">\n              <img src="').concat(this.assetsUrl,'/child.svg" />\n              <p>').concat(n.mask_child,'</p>\n            </div>\n            <div class="customPopup__adult">\n              <img src="').concat(this.assetsUrl,'/adult.svg" />\n              <p>').concat(n.mask_adult,'</p>\n            </div>\n          </div>\n          <a href="tel:').concat(n.phone,'" class="customPopup__tel">\n            <img src="').concat(this.assetsUrl,'/tel.svg" />\n          </a>\n        </div>\n        <a href="https://www.google.com/maps/dir/').concat(this.location[0],",").concat(this.location[1],"/").concat(n.coordinates[0],",").concat(n.coordinates[1],'" class="customPopup__google" target="_blank">\n          <img src="').concat(this.assetsUrl,'/vecotr.svg" />\u898f\u5283\u8def\u7dda\n        </a>\n      </div>\n    ')}},{key:"customIcon",value:function(n){return $.icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-".concat(n,".png"),shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})}},{key:"getPosition",value:function(){var n=this;navigator.geolocation.getCurrentPosition((function(l){n.location$.next([l.coords.latitude,l.coords.longitude])}))}}]),n}(),N=o.nb({encapsulation:2,styles:[['@charset "UTF-8";.leaflet-popup-content:after{content:"";display:block;clear:both}.map-container{position:absolute;top:0;left:0;right:0;bottom:0}#map,.map-frame{height:100%}.customPopup{font-family:"Hiragino Sans CNS","\u5fae\u8edf\u6b63\u9ed1\u9ad4",Arial;width:18.75rem}.customPopup__title{font-size:1.125rem;font-weight:700;line-height:1.6875rem}.customPopup__addr,.customPopup__note{font-size:.875rem;line-height:1.5;color:#828282}.customPopup__phone{margin-top:.5rem;font-size:.875rem;line-height:1.5;color:#828282}.customPopup__updated{margin-top:.5rem;font-size:.75rem;line-height:1.5;color:#828282}.customPopup__adult,.customPopup__child{font-size:1.5rem;font-weight:700;color:#4f4f4f}.customPopup__adult img,.customPopup__child img{height:1.875rem}.customPopup__adult p,.customPopup__child p{text-align:center;line-height:1;margin:0}.customPopup__tel{display:block;margin:.5rem 0;line-height:0;padding:.375rem 0;text-align:center;border:1px solid #f2c94c;box-sizing:border-box;border-radius:1.25rem}.customPopup__google{clear:both;display:block;margin-top:.5rem;padding:.375rem 0;font-size:1.25rem;font-weight:700;text-align:center;color:#fff!important;text-decoration:none!important;border-radius:1.25rem;background:#f2c94c}.customPopup__google img{position:relative;top:.125rem;margin-right:.5rem}.customPopup__block-left{float:left;width:55%}.customPopup__block-right{float:right;width:45%}.customPopup__block-flex{display:-webkit-box;display:flex;justify-content:space-around}']],data:{}});function U(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,2,"div",[["class","map-container"]],null,null,null,null,null)),(n()(),o.pb(1,0,null,null,1,"div",[["class","map-frame"]],null,null,null,null,null)),(n()(),o.pb(2,0,[["maskmap",1]],null,0,"div",[["id","map"]],null,null,null,null,null)),(n()(),o.pb(3,0,null,null,1,"app-masklist",[],null,null,null,I,S)),o.ob(4,114688,null,0,w,[P,y],null,null)],(function(n,l){n(l,4,0)}),null)}var G=o.nb({encapsulation:0,styles:[['.maskmap[_ngcontent-%COMP%]:after{content:"";display:block;clear:both}.hamburger[_ngcontent-%COMP%]{display:none;z-index:100000;position:absolute;top:1.25rem;right:1.25rem;width:50px;height:45px;padding:10px;background:#e0e0e0;border-radius:.25rem}.hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-indent:-9999px;-webkit-transition:.5s;transition:.5s;position:absolute;display:block;cursor:pointer;width:30px;height:5px;background:#4f4f4f;margin:10px 0}.hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{-webkit-transition:.5s;transition:.5s;content:"";position:absolute;top:-10px;left:0;display:block;width:30px;height:5px;background:#4f4f4f}.hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{-webkit-transition:.5s;transition:.5s;content:"";position:absolute;top:10px;left:0;display:block;width:30px;height:5px;background:#4f4f4f}.hamburger.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg);background-color:transparent}.hamburger.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{top:-.625rem;-webkit-transform:translateY(10.5px) rotate(45deg);transform:translateY(10.5px) rotate(45deg)}.hamburger.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{top:-.625rem;-webkit-transform:translateY(10.5px) rotate(-45deg);transform:translateY(10.5px) rotate(-45deg)}.maskmap[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:flex}.maskmap[_ngcontent-%COMP%]   app-search[_ngcontent-%COMP%]{position:relative;z-index:9999;width:300px;height:100vh;background:#fff}.maskmap[_ngcontent-%COMP%]   app-map[_ngcontent-%COMP%]{position:relative;width:calc(100% - 300px)}@media (max-width:800px){.maskmap[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:100%}.maskmap[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]{display:block}.maskmap[_ngcontent-%COMP%]   app-search[_ngcontent-%COMP%]{position:absolute;z-index:99999;-webkit-transition:.5s;transition:.5s;-webkit-transform:translateX(-300px);transform:translateX(-300px)}.maskmap[_ngcontent-%COMP%]   app-search.active[_ngcontent-%COMP%]{-webkit-transform:translateX(0);transform:translateX(0)}.maskmap[_ngcontent-%COMP%]   app-map[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}}']],data:{}});function A(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,7,"div",[["class","maskmap"]],null,null,null,null,null)),(n()(),o.pb(1,0,null,null,4,"app-search",[],null,[[null,"doOpen"]],(function(n,l,t){var e=!0;return"doOpen"===l&&(e=!1!==n.component.getOpen(t)&&e),e}),z,O)),o.Eb(512,null,c.q,c.r,[o.q,o.r,o.k,o.B]),o.ob(3,278528,null,0,c.i,[c.q],{ngClass:[0,"ngClass"]},null),o.Db(4,{active:0}),o.ob(5,114688,null,0,_,[P,y],null,{doOpen:"doOpen"}),(n()(),o.pb(6,0,null,null,1,"app-map",[],null,null,null,U,N)),o.ob(7,245760,null,0,T,[P,y],null,null)],(function(n,l){var t=n(l,4,0,l.component.isOpen);n(l,3,0,t),n(l,5,0),n(l,7,0)}),null)}var q=o.lb("app-root",u,(function(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,1,"app-root",[],null,null,null,A,G)),o.ob(1,49152,null,0,u,[],null,null)],null,null)}),{},{},[]),B=t("iInd"),X=function n(){_classCallCheck(this,n)},J=o.mb(i,[u],(function(n){return o.yb([o.zb(512,o.j,o.X,[[8,[s.a,q,p.b,p.a]],[3,o.j],o.v]),o.zb(5120,o.s,o.jb,[[3,o.s]]),o.zb(4608,c.l,c.k,[o.s,[2,c.t]]),o.zb(5120,o.fb,o.kb,[o.x]),o.zb(5120,o.c,o.gb,[]),o.zb(5120,o.q,o.hb,[]),o.zb(5120,o.r,o.ib,[]),o.zb(4608,b.b,b.k,[c.d]),o.zb(6144,o.E,null,[b.b]),o.zb(4608,b.e,b.g,[]),o.zb(5120,b.c,(function(n,l,t,e,a,o,i,u){return[new b.i(n,l,t),new b.n(e),new b.m(a,o,i,u)]}),[c.d,o.x,o.z,c.d,c.d,b.e,o.Y,[2,b.f]]),o.zb(4608,b.d,b.d,[b.c,o.x]),o.zb(135680,b.l,b.l,[c.d]),o.zb(4608,b.j,b.j,[b.d,b.l,o.c]),o.zb(6144,o.C,null,[b.j]),o.zb(6144,b.o,null,[b.l]),o.zb(4608,o.K,o.K,[o.x]),o.zb(4608,k.h,k.n,[c.d,o.z,k.l]),o.zb(4608,k.o,k.o,[k.h,k.m]),o.zb(5120,k.a,(function(n){return[n]}),[k.o]),o.zb(4608,k.k,k.k,[]),o.zb(6144,k.i,null,[k.k]),o.zb(4608,k.g,k.g,[k.i]),o.zb(6144,k.b,null,[k.g]),o.zb(4608,k.f,k.j,[k.b,o.p]),o.zb(4608,k.c,k.c,[k.f]),o.zb(5120,B.a,B.w,[B.k]),o.zb(4608,B.d,B.d,[]),o.zb(6144,B.f,null,[B.d]),o.zb(135680,B.n,B.n,[B.k,o.u,o.i,o.p,B.f]),o.zb(4608,B.e,B.e,[]),o.zb(5120,B.B,B.s,[B.k,c.o,B.g]),o.zb(5120,B.h,B.z,[B.x]),o.zb(5120,o.b,(function(n){return[n]}),[B.h]),o.zb(4608,r.d,r.d,[]),o.zb(1073742336,c.c,c.c,[]),o.zb(1024,o.l,b.p,[]),o.zb(1024,o.w,(function(){return[B.r()]}),[]),o.zb(512,B.x,B.x,[o.p]),o.zb(1024,o.d,(function(n,l){return[b.q(n),B.y(l)]}),[[2,o.w],B.x]),o.zb(512,o.e,o.e,[[2,o.d]]),o.zb(131584,o.g,o.g,[o.x,o.Y,o.p,o.l,o.j,o.e]),o.zb(1073742336,o.f,o.f,[o.g]),o.zb(1073742336,b.a,b.a,[[3,b.a]]),o.zb(1073742336,k.e,k.e,[]),o.zb(1073742336,k.d,k.d,[]),o.zb(1024,B.q,B.u,[[3,B.k]]),o.zb(512,B.p,B.c,[]),o.zb(512,B.b,B.b,[]),o.zb(256,B.g,{},[]),o.zb(1024,c.h,B.t,[c.n,[2,c.a],B.g]),o.zb(512,c.g,c.g,[c.h,c.n]),o.zb(512,o.i,o.i,[]),o.zb(512,o.u,o.H,[o.i,[2,o.I]]),o.zb(1024,B.i,(function(){return[[{path:"",redirectTo:"/maskmap",pathMatch:"full"},{path:"maskmap",component:u}]]}),[]),o.zb(1024,B.k,B.v,[o.g,B.p,B.b,c.g,o.p,o.u,o.i,B.i,B.g,[2,B.o],[2,B.j]]),o.zb(1073742336,B.l,B.l,[[2,B.q],[2,B.k]]),o.zb(1073742336,X,X,[]),o.zb(1073742336,r.c,r.c,[]),o.zb(1073742336,r.a,r.a,[]),o.zb(1073742336,h.j,h.j,[]),o.zb(1073742336,i,i,[]),o.zb(256,o.W,!0,[]),o.zb(256,k.l,"XSRF-TOKEN",[]),o.zb(256,k.m,"X-XSRF-TOKEN",[])])}));Object(o.Q)(),b.h().bootstrapModuleFactory(J).catch((function(n){return console.error(n)}))},zn8P:function(n,l){function t(n){return Promise.resolve().then((function(){var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}))}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id="zn8P"}},[[0,0,5]]]);